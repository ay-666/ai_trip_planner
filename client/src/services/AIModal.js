import { GoogleGenerativeAI } from "@google/generative-ai";



const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
});

const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
};

export const chatSession = model.startChat({
    generationConfig,
    history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan For Location : London , for 3 Days for Couple with group size 2 people with a Cheap Budget, Give me Hotels options list with Hotel Name, Hotel Address , Price ,Hotel Image URL , Hotel geo coordinates , Ratings ,Descriptions in JSON format. Also, Suggest Itinerary with time (morning - evening) , place name, place details , place image URL , geo coordinates, ticket pricing , ratings ,timings ,time to explore each of the place, for 3 days with each day plan in JSON format. Exclude any place who's details are not clear."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "## London 3-Day Budget Trip for a Couple (JSON Format)\n\n```json\n{\n  \"hotels\": [\n    {\n      \"name\": \"The Z Hotel Soho\",\n      \"address\": \"10-12 Bateman St, London W1D 3AQ, United Kingdom\",\n      \"price\": \"from £60 per night\",\n      \"image_url\": \"https://www.thezhotels.com/media/cache/2/images/gallery/the-z-soho-london-hotel/exterior-soho.jpg\",\n      \"geo_coordinates\": \"51.5126,-0.1302\",\n      \"ratings\": \"4.0 stars\",\n      \"description\": \"A stylish and modern hotel in the heart of Soho, offering compact but well-designed rooms and a convenient location for exploring central London.\"\n    },\n    {\n      \"name\": \"The Premier Inn London Paddington\",\n      \"address\": \"125-131 Sussex Gardens, London W2 2UD, United Kingdom\",\n      \"price\": \"from £50 per night\",\n      \"image_url\": \"https://www.premierinn.com/media/images/hotel-images/london-paddington-hotel-exterior.jpg\",\n      \"geo_coordinates\": \"51.5088,-0.1710\",\n      \"ratings\": \"3.5 stars\",\n      \"description\": \"A reliable and comfortable hotel located near Paddington Station, offering clean and functional rooms at an affordable price.\"\n    },\n    {\n      \"name\": \"Generator London\",\n      \"address\": \"10-12 Tavistock Pl, Bloomsbury, London WC1H 9SN, United Kingdom\",\n      \"price\": \"from £40 per night\",\n      \"image_url\": \"https://www.generatorhostels.com/media/images/hostels/london/exterior_gallery_01.jpg\",\n      \"geo_coordinates\": \"51.5162,-0.1231\",\n      \"ratings\": \"4.5 stars\",\n      \"description\": \"A vibrant and social hostel in Bloomsbury, offering a variety of room options including private rooms and shared dorms.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": \"Day 1\",\n      \"plan\": [\n        {\n          \"time\": \"Morning (9:00 AM - 12:00 PM)\",\n          \"place\": \"Buckingham Palace\",\n          \"details\": \"Witness the Changing of the Guard ceremony (free, 11:30 AM) and explore the State Rooms (ticketed, £25 per person).\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/Buckingham_Palace_from_the_Mall%2C_London%2C_England%2C_July_2015.jpg/1200px-Buckingham_Palace_from_the_Mall%2C_London%2C_England%2C_July_2015.jpg\",\n          \"geo_coordinates\": \"51.5014,-0.1419\",\n          \"ticket_pricing\": \"Changing of the Guard: Free, State Rooms: £25 per person\",\n          \"ratings\": \"4.5 stars\",\n          \"timings\": \"Changing of the Guard: 11:30 AM (daily), State Rooms: 9:30 AM - 5:30 PM (check website for closures)\"\n        },\n        {\n          \"time\": \"Lunch (12:00 PM - 1:00 PM)\",\n          \"place\": \"Piccadilly Circus\",\n          \"details\": \"Enjoy a quick bite at a nearby cafe or grab some street food. It's a great spot to people-watch and soak in the energy of London.\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Piccadilly_Circus_London_2005.jpg/1200px-Piccadilly_Circus_London_2005.jpg\",\n          \"geo_coordinates\": \"51.5074,-0.1301\",\n          \"ticket_pricing\": \"N/A\",\n          \"ratings\": \"4.0 stars\",\n          \"timings\": \"Open 24/7\"\n        },\n        {\n          \"time\": \"Afternoon (1:00 PM - 5:00 PM)\",\n          \"place\": \"National Gallery\",\n          \"details\": \"Explore one of the world's greatest art collections, including masterpieces by Van Gogh, Leonardo da Vinci, and Monet (free admission).\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/National_Gallery_London_2019.jpg/1200px-National_Gallery_London_2019.jpg\",\n          \"geo_coordinates\": \"51.5074,-0.1278\",\n          \"ticket_pricing\": \"Free admission\",\n          \"ratings\": \"4.5 stars\",\n          \"timings\": \"10:00 AM - 6:00 PM (check website for closures)\"\n        },\n        {\n          \"time\": \"Evening (5:00 PM - 7:00 PM)\",\n          \"place\": \"Trafalgar Square\",\n          \"details\": \"Wander around the iconic square, admire Nelson's Column, and enjoy the lively atmosphere.\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Trafalgar_Square_2016.jpg/1200px-Trafalgar_Square_2016.jpg\",\n          \"geo_coordinates\": \"51.5076,-0.1278\",\n          \"ticket_pricing\": \"N/A\",\n          \"ratings\": \"4.5 stars\",\n          \"timings\": \"Open 24/7\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 2\",\n      \"plan\": [\n        {\n          \"time\": \"Morning (9:00 AM - 12:00 PM)\",\n          \"place\": \"Tower Bridge\",\n          \"details\": \"Walk across the iconic bridge and explore its history (ticketed, £10 per person).\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Tower_Bridge_%285555377819%29.jpg/1200px-Tower_Bridge_%285555377819%29.jpg\",\n          \"geo_coordinates\": \"51.5052,-0.0833\",\n          \"ticket_pricing\": \"£10 per person\",\n          \"ratings\": \"4.5 stars\",\n          \"timings\": \"9:30 AM - 5:30 PM (check website for closures)\"\n        },\n        {\n          \"time\": \"Lunch (12:00 PM - 1:00 PM)\",\n          \"place\": \"Borough Market\",\n          \"details\": \"Enjoy a delicious and affordable lunch at Borough Market, one of London's best food markets.\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Borough_Market_%283040982758%29.jpg/1200px-Borough_Market_%283040982758%29.jpg\",\n          \"geo_coordinates\": \"51.5043,-0.0930\",\n          \"ticket_pricing\": \"N/A\",\n          \"ratings\": \"4.5 stars\",\n          \"timings\": \"Monday-Wednesday: 10:00 AM - 5:00 PM, Thursday-Saturday: 10:00 AM - 6:00 PM\"\n        },\n        {\n          \"time\": \"Afternoon (1:00 PM - 5:00 PM)\",\n          \"place\": \"Shakespeare's Globe Theatre\",\n          \"details\": \"Experience a performance or take a tour of the replica Elizabethan theatre (ticketed, from £5 per person).\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Shakespeare%27s_Globe_Theatre_Exterior_01.jpg/1200px-Shakespeare%27s_Globe_Theatre_Exterior_01.jpg\",\n          \"geo_coordinates\": \"51.5033,-0.1000\",\n          \"ticket_pricing\": \"From £5 per person\",\n          \"ratings\": \"4.5 stars\",\n          \"timings\": \"Check website for show times and tours\"\n        },\n        {\n          \"time\": \"Evening (5:00 PM - 7:00 PM)\",\n          \"place\": \"South Bank\",\n          \"details\": \"Stroll along the South Bank, enjoy views of the Thames, and visit the London Eye (ticketed, from £25 per person).\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/London_Eye_at_night.jpg/1200px-London_Eye_at_night.jpg\",\n          \"geo_coordinates\": \"51.5032,-0.1194\",\n          \"ticket_pricing\": \"From £25 per person\",\n          \"ratings\": \"4.5 stars\",\n          \"timings\": \"10:00 AM - 10:30 PM (check website for closures)\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 3\",\n      \"plan\": [\n        {\n          \"time\": \"Morning (9:00 AM - 12:00 PM)\",\n          \"place\": \"British Museum\",\n          \"details\": \"Explore one of the world's most famous museums, featuring artifacts from ancient civilizations (free admission).\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/45/British_Museum_London_%282009%29.jpg/1200px-British_Museum_London_%282009%29.jpg\",\n          \"geo_coordinates\": \"51.5194,-0.1275\",\n          \"ticket_pricing\": \"Free admission\",\n          \"ratings\": \"4.5 stars\",\n          \"timings\": \"10:00 AM - 5:30 PM (check website for closures)\"\n        },\n        {\n          \"time\": \"Lunch (12:00 PM - 1:00 PM)\",\n          \"place\": \"Covent Garden\",\n          \"details\": \"Enjoy a relaxing lunch at a cafe or restaurant in Covent Garden, a bustling area with street performers and shops.\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/Covent_Garden_2016.jpg/1200px-Covent_Garden_2016.jpg\",\n          \"geo_coordinates\": \"51.5116,-0.1225\",\n          \"ticket_pricing\": \"N/A\",\n          \"ratings\": \"4.0 stars\",\n          \"timings\": \"Open 24/7\"\n        },\n        {\n          \"time\": \"Afternoon (1:00 PM - 5:00 PM)\",\n          \"place\": \"Hyde Park\",\n          \"details\": \"Enjoy a relaxing walk in Hyde Park, one of London's largest and most popular green spaces.\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Hyde_Park%2C_London_%282016%29.jpg/1200px-Hyde_Park%2C_London_%282016%29.jpg\",\n          \"geo_coordinates\": \"51.5074,-0.1675\",\n          \"ticket_pricing\": \"Free admission\",\n          \"ratings\": \"4.5 stars\",\n          \"timings\": \"5:00 AM - 12:00 AM\"\n        },\n        {\n          \"time\": \"Evening (5:00 PM - 8:00 PM)\",\n          \"place\": \"Dinner and a Pub\",\n          \"details\": \"Indulge in a traditional British pub dinner and enjoy the lively atmosphere of a London pub.\"\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f7/The_Fox_and_Anchor_Pub%2C_London.jpg/1200px-The_Fox_and_Anchor_Pub%2C_London.jpg\",\n          \"geo_coordinates\": \"51.5151,-0.1082\",\n          \"ticket_pricing\": \"N/A\",\n          \"ratings\": \"4.0 stars\",\n          \"timings\": \"Vary depending on the pub\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Note:** \n\n* This itinerary is a suggestion and can be customized based on your preferences and interests. \n* Prices for attractions are approximate and can vary depending on the season and availability. \n* Make sure to check the official websites for the latest information on ticket prices, timings, and closures.\n* London has a great public transportation system (Tube, buses, etc.). Consider purchasing an Oyster card or Travelcard for easy and affordable travel.\n\n**Tips for a Cheap Budget Trip:**\n\n* **Stay in hostels or budget-friendly hotels.**\n* **Cook some meals in your accommodation if possible.**\n* **Take advantage of free attractions like museums, parks, and walking tours.**\n* **Look for deals and discounts on activities and attractions.**\n* **Travel during off-peak seasons.**\n* **Pack light to avoid baggage fees.**\n* **Consider purchasing a tourist pass for discounts on attractions and transportation.**"},
          ],
        },
      ],
    });

